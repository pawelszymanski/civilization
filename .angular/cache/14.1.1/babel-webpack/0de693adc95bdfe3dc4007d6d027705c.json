{"ast":null,"code":"import { MapSizeId } from '../../models/map-size';\nimport { ModalId, ScreenId } from '../../models/ui';\nimport { LandmassValueId, RainfallId, TemperatureId, WorldAgeId } from '../../models/map-generator';\nimport { MAP_SIZE_SETTINGS_LIST } from '../../consts/map-size-settings.const';\nimport { EARTH_MAP } from '../../consts/earth-map';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/map-generator.service\";\nimport * as i2 from \"../../services/save.service\";\nimport * as i3 from \"../../services/zip.service\";\nimport * as i4 from \"../../stores/ui.store\";\nimport * as i5 from \"../../stores/map.store\";\nimport * as i6 from \"../../stores/save-headers.store\";\nconst _c0 = [\"class\", \"main-menu-component\"];\nexport let MainMenuComponent = /*#__PURE__*/(() => {\n  class MainMenuComponent {\n    constructor(mapGeneratorService, saveService, zipService, uiStore, mapStore, saveHeadersStore) {\n      this.mapGeneratorService = mapGeneratorService;\n      this.saveService = saveService;\n      this.zipService = zipService;\n      this.uiStore = uiStore;\n      this.mapStore = mapStore;\n      this.saveHeadersStore = saveHeadersStore;\n      this.showSinglePlayerMenu = false;\n      this.subscriptions = [];\n    }\n\n    ngOnInit() {\n      this.subscribeToData();\n    }\n\n    ngOnDestroy() {\n      this.unsubscribeFromData();\n    }\n\n    subscribeToData() {\n      this.subscriptions.push(this.uiStore.ui.subscribe(ui => this.ui = ui), this.saveHeadersStore.saveHeaders.subscribe(saveHeaders => this.saveHeaders = saveHeaders));\n    }\n\n    unsubscribeFromData() {\n      this.subscriptions.forEach(s => s.unsubscribe());\n    }\n\n    get noSavesPresent() {\n      return this.saveHeaders.length === 0;\n    }\n\n    onSinglePlayerClick() {\n      this.showSinglePlayerMenu = true;\n    }\n\n    onOptionsClick() {\n      // TODO\n      this.showSinglePlayerMenu = false;\n    }\n\n    onExitToGoogleClick() {\n      this.uiStore.openModal(ModalId.EXIT_GAME_CONFIRMATION);\n    }\n\n    onResumeGameClick() {\n      if (this.noSavesPresent) {\n        return;\n      }\n\n      const latestTimestamp = this.saveHeaders.map(save => save.timestamp).sort().pop();\n      const saveToBeLoaded = this.saveHeaders.find(save => save.timestamp === latestTimestamp);\n      this.saveService.load(saveToBeLoaded.uuid);\n      this.uiStore.setScreen(ScreenId.GAMEPLAY);\n    }\n\n    onLoadGameClick() {\n      if (this.noSavesPresent) {\n        return;\n      }\n\n      this.uiStore.openModal(ModalId.LOAD_GAME);\n    }\n\n    onPlayNowClick() {\n      const defaultMapSizeSettings = MAP_SIZE_SETTINGS_LIST.find(mss => mss.id === MapSizeId.STANDARD);\n      const mapGeneratorSetting = {\n        width: defaultMapSizeSettings.width,\n        height: defaultMapSizeSettings.height,\n        landmass: LandmassValueId.STANDARD,\n        continents: defaultMapSizeSettings.continents,\n        islands: defaultMapSizeSettings.islands,\n        worldAge: WorldAgeId.STANDARD,\n        temperature: TemperatureId.STANDARD,\n        rainfall: RainfallId.STANDARD\n      };\n      const newMap = this.mapGeneratorService.generateNewGameMap(mapGeneratorSetting);\n      this.mapStore.next(newMap);\n      this.uiStore.setScreen(ScreenId.GAMEPLAY);\n    }\n\n    onPlayOnEarthClick() {\n      const earthMap = this.zipService.unzip(EARTH_MAP);\n      this.mapStore.next(earthMap);\n      this.uiStore.setScreen(ScreenId.GAMEPLAY);\n    }\n\n    onCreateGameClick() {\n      // TODO\n      this.showSinglePlayerMenu = false;\n    }\n\n  }\n\n  MainMenuComponent.ɵfac = function MainMenuComponent_Factory(t) {\n    return new (t || MainMenuComponent)(i0.ɵɵdirectiveInject(i1.MapGeneratorService), i0.ɵɵdirectiveInject(i2.SaveService), i0.ɵɵdirectiveInject(i3.ZipService), i0.ɵɵdirectiveInject(i4.UiStore), i0.ɵɵdirectiveInject(i5.MapStore), i0.ɵɵdirectiveInject(i6.SaveHeadersStore));\n  };\n\n  MainMenuComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MainMenuComponent,\n    selectors: [[\"\", 8, \"main-menu-component\"]],\n    attrs: _c0,\n    decls: 20,\n    vars: 10,\n    consts: [[1, \"game-title\"], [1, \"primary-menu\"], [1, \"primary-menu-item\", 3, \"click\"], [1, \"primary-menu-item\", \"disabled\", 3, \"click\"], [1, \"secondary-menu\"], [1, \"secondary-menu-item\", 3, \"click\"], [1, \"secondary-menu-item\", \"disabled\", 3, \"click\"]],\n    template: function MainMenuComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h1\", 0);\n        i0.ɵɵtext(1, \"Civilization VI\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"ul\", 1)(3, \"li\", 2);\n        i0.ɵɵlistener(\"click\", function MainMenuComponent_Template_li_click_3_listener() {\n          return ctx.onSinglePlayerClick();\n        });\n        i0.ɵɵtext(4, \"Single player\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"li\", 3);\n        i0.ɵɵlistener(\"click\", function MainMenuComponent_Template_li_click_5_listener() {\n          return ctx.onOptionsClick();\n        });\n        i0.ɵɵtext(6, \"Options\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"li\", 2);\n        i0.ɵɵlistener(\"click\", function MainMenuComponent_Template_li_click_7_listener() {\n          return ctx.onExitToGoogleClick();\n        });\n        i0.ɵɵtext(8, \"Exit to Google\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"ul\", 4)(10, \"li\", 5);\n        i0.ɵɵlistener(\"click\", function MainMenuComponent_Template_li_click_10_listener() {\n          return ctx.onResumeGameClick();\n        });\n        i0.ɵɵtext(11, \"Resume Game\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"li\", 5);\n        i0.ɵɵlistener(\"click\", function MainMenuComponent_Template_li_click_12_listener() {\n          return ctx.onLoadGameClick();\n        });\n        i0.ɵɵtext(13, \"Load Game\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"li\", 5);\n        i0.ɵɵlistener(\"click\", function MainMenuComponent_Template_li_click_14_listener() {\n          return ctx.onPlayNowClick();\n        });\n        i0.ɵɵtext(15, \"Play Now\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"li\", 5);\n        i0.ɵɵlistener(\"click\", function MainMenuComponent_Template_li_click_16_listener() {\n          return ctx.onPlayOnEarthClick();\n        });\n        i0.ɵɵtext(17, \"Play on Earth\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"li\", 6);\n        i0.ɵɵlistener(\"click\", function MainMenuComponent_Template_li_click_18_listener() {\n          return ctx.onCreateGameClick();\n        });\n        i0.ɵɵtext(19, \"Create Game\");\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵclassProp(\"active\", ctx.showSinglePlayerMenu);\n        i0.ɵɵadvance(1);\n        i0.ɵɵclassProp(\"active\", ctx.showSinglePlayerMenu);\n        i0.ɵɵadvance(6);\n        i0.ɵɵclassProp(\"active\", ctx.showSinglePlayerMenu);\n        i0.ɵɵadvance(1);\n        i0.ɵɵclassProp(\"disabled\", ctx.noSavesPresent);\n        i0.ɵɵadvance(2);\n        i0.ɵɵclassProp(\"disabled\", ctx.noSavesPresent);\n      }\n    },\n    styles: [\".main-menu-component{position:absolute;top:0;right:0;bottom:0;left:0;z-index:300;background:#2e5878}.main-menu-component .game-title{position:absolute;top:200px;left:0;z-index:0;width:100%;color:#eff9fd;font-size:100px;line-height:68px;font-weight:400;text-align:center;text-transform:uppercase;font-family:Bellefair;letter-spacing:10px;text-shadow:0 5px 9px rgba(0,0,0,.4666666667);user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;-webkit-touch-callout:none}.main-menu-component .primary-menu,.main-menu-component .secondary-menu{position:absolute;top:50%;width:300px;transition:.3s all ease-in-out}.main-menu-component .primary-menu{left:calc(50% - 150px)}.main-menu-component .primary-menu.active{left:calc(50% - 320px)}.main-menu-component .secondary-menu{left:calc(50% + 170px);opacity:0}.main-menu-component .secondary-menu.active{left:calc(50% + 20px);opacity:1}.main-menu-component .primary-menu-item,.main-menu-component .secondary-menu-item{width:300px;height:40px;color:#fff;font-size:24px;line-height:38px;text-align:center;font-family:Calibri;background:cornflowerblue;border:1px solid white;margin-bottom:20px;cursor:pointer;user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;-webkit-touch-callout:none}.main-menu-component .primary-menu-item.active,.main-menu-component .primary-menu-item:hover:not(.disabled),.main-menu-component .secondary-menu-item.active,.main-menu-component .secondary-menu-item:hover:not(.disabled){background:#9f9787}.main-menu-component .primary-menu-item.disabled,.main-menu-component .secondary-menu-item.disabled{opacity:.3;cursor:default}\\n\"],\n    encapsulation: 2\n  });\n  return MainMenuComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}