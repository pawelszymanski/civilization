{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/local-storage.service\";\nimport * as i2 from \"../services/tile-yield.service\";\nimport * as i3 from \"../services/zip.service\";\nexport let SaveHeadersStore = /*#__PURE__*/(() => {\n  class SaveHeadersStore {\n    constructor(localStorageService, tileYieldService, zipService) {\n      this.localStorageService = localStorageService;\n      this.tileYieldService = tileYieldService;\n      this.zipService = zipService;\n      this.LOCAL_STORAGE_SAVE_HEADERS_KEY = 'Saves'; // tslint:disable-next-line:variable-name\n\n      this._saveHeaders = new BehaviorSubject([]);\n      this.saveHeaders = this._saveHeaders.asObservable();\n      this.getLocalSaveHeaders();\n    }\n\n    getLocalSaveHeaders() {\n      const data = this.localStorageService.get(this.LOCAL_STORAGE_SAVE_HEADERS_KEY);\n\n      if (data) {\n        const saveIds = this.zipService.unzip(data);\n        this.next(saveIds);\n      }\n    }\n\n    persistSaveHeaders() {\n      const saveIdsZipped = this.zipService.zip(this._saveHeaders.value);\n      this.localStorageService.set(this.LOCAL_STORAGE_SAVE_HEADERS_KEY, saveIdsZipped);\n    }\n\n    next(saveHeaders) {\n      this._saveHeaders.next(saveHeaders);\n    }\n\n    add(saveHeader) {\n      this._saveHeaders.next(this._saveHeaders.value.concat(saveHeader));\n\n      this.persistSaveHeaders();\n    }\n\n    remove(saveUuid) {\n      this._saveHeaders.next(this._saveHeaders.value.filter(save => save.uuid !== saveUuid));\n\n      this.persistSaveHeaders();\n    }\n\n  }\n\n  SaveHeadersStore.ɵfac = function SaveHeadersStore_Factory(t) {\n    return new (t || SaveHeadersStore)(i0.ɵɵinject(i1.LocalStorageService), i0.ɵɵinject(i2.TileYieldService), i0.ɵɵinject(i3.ZipService));\n  };\n\n  SaveHeadersStore.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: SaveHeadersStore,\n    factory: SaveHeadersStore.ɵfac\n  });\n  return SaveHeadersStore;\n})();","map":null,"metadata":{},"sourceType":"module"}