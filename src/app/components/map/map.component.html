<!-- For some reason overlay needs to be before map elem, otherwise it kills performance -->
<div class="overlay"
     (mousedown)="onMousedown($event)"
     (mousemove)="onMousemove($event)"
     (mouseup)="onMouseup($event)"
     (contextmenu)="onContextmenu($event)"
     (wheel)="onWheel($event)">
</div>

<canvas #canvas
        [width]="size.screen.width"
        [height]="size.screen.height">
</canvas>

<ul class="map" *ngIf="map">

  <li class="tile"
      *ngFor="let tile of map.tiles"
      [style.display]="tile.isVisible ? 'block' : 'none'"
      [style.transform]="tile.isVisible ? 'translate(' + tile.px.x + 'px, ' + tile.px.y + 'px)' : ''"
      [ngClass]="tile.isVisible ? (tile | tileCssClasses:camera.tileSize) : ''">
  </li>

</ul>
